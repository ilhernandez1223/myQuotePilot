<!--DOC
    
TYPE html-->
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Auto Insurance | QuotePilot</title>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link href="https://cdn.tailwindcss.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com"></script>
<style>
    :root {
      --primary: #3b82f6;
      --secondary: #2563eb;
    }
    body { 
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
      min-height: 100vh;
    }
    .form-card {
      background: rgba(255, 255, 255, 0.96);
      backdrop-filter: blur(10px);
    }
    .coverage-option {
      transition: all 0.2s ease;
    }
    .coverage-option:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }
    .coverage-option.selected {
      border-color: var(--primary);
      background-color: rgba(219, 234, 254, 0.5);
    }
    .btn-primary {
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      transition: all 0.3s ease;
    }
    .btn-primary:hover {
      background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
      transform: translateY(-1px);
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }
    .loading-spinner {
      display: inline-block;
      width: 1rem;
      height: 1rem;
      border: 2px solid rgba(59,130,246,0.3);
      border-radius: 50%;
      border-top-color: #3b82f6;
      animation: spin 1s ease-in-out infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    .vehicle-card, .driver-card {
      border-left: 4px solid var(--primary);
    }
    .remove-btn {
      transition: all 0.2s ease;
    }
    .remove-btn:hover {
      transform: scale(1.1);
    }
    .input-focus {
      transition: all 0.2s ease;
    }
    .input-focus:focus {
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5);
    }
  
@keyframes fly {
  0% { transform: translateX(0); opacity: 0.7; }
  50% { transform: translateX(5px) translateY(-2px); opacity: 1; }
  100% { transform: translateX(10px); opacity: 0.7; }
}
.animate-fly {
  animation: fly 2s ease-in-out infinite;
}

</style>
</head>
<body class="flex flex-col">
<!-- Header -->
<header class="bg-white/90 backdrop-blur-sm border-b border-gray-100 shadow-sm sticky top-0 z-10">
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
<div class="flex justify-between h-16">
<div class="flex items-center">
<img alt="QuotePilot" class="h-8 mr-3" height="32" loading="lazy" src="assets/logo.webp" width="32"/>
<span class="text-xl font-bold text-blue-600">QuotePilot</span>
<svg class="h-6 w-6 ml-2 text-blue-500 animate-fly" fill="currentColor" viewBox="0 0 24 24">
  <path d="M2.5 19.5L21 12 2.5 4.5 2 10l15 2-15 2z" />
</svg>

</div>
<nav class="hidden md:flex items-center space-x-8">
<a class="text-gray-500 hover:text-blue-600 px-1 py-2 text-sm font-medium transition" href="index.html">Home</a>
</nav>
<div class="md:hidden flex items-center">
<button class="text-gray-500 hover:text-gray-700 focus:outline-none" id="mobileMenuButton">
<svg class="h-6 w-6" fill="none" stroke="currentColor" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M4 6h16M4 12h16M4 18h16" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
</button>
</div>
</div>
</div>
</header>
<main class="flex-grow flex items-center justify-center p-4 sm:p-6">
<div class="form-card rounded-xl p-6 sm:p-8 w-full max-w-2xl border border-gray-100 shadow-lg">
<div class="mb-8 text-center">
<h1 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-2">Auto Insurance Details</h1>
<p class="text-gray-600">Tell us about your vehicles and drivers to get accurate quotes.</p>
</div>
<form action="quotes.html" class="space-y-6" id="autoForm" method="get">
<!-- Hidden fields -->
<input name="firstName" type="hidden"/>
<input name="lastName" type="hidden"/>
<input name="email" type="hidden"/>
<input name="phone" type="hidden"/>
<input name="dob" type="hidden"/>
<input name="zip" type="hidden"/>
<input name="coverageType" type="hidden" value="auto"/>
<!-- Vehicles Section -->
<div class="space-y-4">
<div class="flex justify-between items-center">
<h2 class="text-lg font-medium text-gray-900">Vehicles</h2>
<button class="text-sm text-blue-600 hover:text-blue-800 font-medium flex items-center" id="addVehicleBtn" type="button">
<svg class="h-4 w-4 mr-1" fill="none" stroke="currentColor" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M12 6v6m0 0v6m0-6h6m-6 0H6" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
              Add Another Vehicle
            </button>
</div>
<!-- Vehicle Cards Container -->
<div class="space-y-4" id="vehicleCards">
<!-- Default Vehicle Card -->
<div class="vehicle-card bg-white rounded-lg border border-gray-200 p-4 relative">
<div class="flex justify-between items-start mb-4">
<h3 class="font-medium text-gray-900">Vehicle #1</h3>
<button class="remove-btn text-gray-400 hover:text-red-500" onclick="removeVehicle(this)" style="display: none;" type="button">
<svg class="h-5 w-5" fill="none" stroke="currentColor" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
</button>
</div>
<div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Year*</label>
<select class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus vehicle-year" name="vehicles[0][year]" required="">
<option value="">Select Year</option>
<!-- Years will be populated by JavaScript -->
</select>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Make*</label>
<select class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus vehicle-make" name="vehicles[0][make]" required="">
<option value="">Select Make</option>
<option value="acura">Acura</option>
<option value="audi">Audi</option>
<option value="bmw">BMW</option>
<option value="buick">Buick</option>
<option value="cadillac">Cadillac</option>
<option value="chevrolet">Chevrolet</option>
<option value="chrysler">Chrysler</option>
<option value="dodge">Dodge</option>
<option value="ford">Ford</option>
<option value="gmc">GMC</option>
<option value="honda">Honda</option>
<option value="hyundai">Hyundai</option>
<option value="infiniti">Infiniti</option>
<option value="jeep">Jeep</option>
<option value="kia">Kia</option>
<option value="lexus">Lexus</option>
<option value="lincoln">Lincoln</option>
<option value="mazda">Mazda</option>
<option value="mercedes">Mercedes-Benz</option>
<option value="mitsubishi">Mitsubishi</option>
<option value="nissan">Nissan</option>
<option value="porsche">Porsche</option>
<option value="ram">RAM</option>
<option value="subaru">Subaru</option>
<option value="tesla">Tesla</option>
<option value="toyota">Toyota</option>
<option value="volkswagen">Volkswagen</option>
<option value="volvo">Volvo</option>
</select>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Model*</label>
<select class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus vehicle-model" name="vehicles[0][model]" required="">
<option value="">Select Model</option>
</select>
<div class="model-loading hidden mt-1 text-sm text-blue-600">
<span class="loading-spinner"></span> Loading models...
                  </div>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Type*</label>
<select class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus" name="vehicles[0][vehicleType]" required="">
<option value="">Select Type</option>
<option value="car">Car</option>
<option value="truck">Truck</option>
<option value="suv">SUV</option>
<option value="van">Van</option>
<option value="motorcycle">Motorcycle</option>
</select>
</div>
</div>
<div class="mt-4">
<label class="block text-sm font-medium text-gray-700 mb-1">VIN (Optional)
                  <span class="text-xs text-gray-500 ml-1">Vehicle Identification Number</span>
</label>
<input class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus" name="vehicles[0][vin]" placeholder="e.g. 1HGCM82633A123456" type="text"/>
</div>
<div class="mt-4">
<label class="block text-sm font-medium text-gray-700 mb-1">Estimated Annual Mileage*</label>
<select class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus vehicle-mileage" name="vehicles[0][mileage]" required="">
<option value="0-2499">0 – 2,499 miles</option>
<option value="2500-4999">2,500 – 4,999 miles</option>
<option value="5000-7499">5,000 – 7,499 miles</option>
<option value="7500-9999">7,500 – 9,999 miles</option>
<option value="10000-11999">10,000 – 11,999 miles</option>
<option value="12000-13999">12,000 – 13,999 miles</option>
<option value="14000-15000">14,000 – 15,000 miles</option>
</select>
</div>
<div class="mt-4">
<label class="block text-sm font-medium text-gray-700 mb-1">Primary Use*</label>
<select class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus" name="vehicles[0][primaryUse]" required="">
<option value="">Select</option>
<option value="commute">Commute to Work</option>
<option value="business">Business Use</option>
<option value="pleasure">Pleasure</option>
<option value="ride_share">Ride Share</option>
</select>
</div>
<!-- Vehicle-specific coverages -->
<div class="mt-6 pt-4 border-t border-gray-200">
<h4 class="text-sm font-medium text-gray-700 mb-3">Vehicle Coverage Options</h4>
<div class="space-y-3">
<!-- Collision Coverage -->
<div class="flex items-start">
<div class="flex-1">
<label class="block text-sm font-medium text-gray-700 mb-1">Collision Coverage</label>
<select class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus" name="vehicles[0][collision]">
<option value="none">No Coverage</option>
<option value="250">$250 Deductible</option>
<option selected="" value="500">$500 Deductible</option>
<option value="1000">$1,000 Deductible</option>
<option value="1500">$1,500 Deductible</option>
<option value="2000">$2,000 Deductible</option>
</select>
<p class="mt-1 text-xs text-gray-500">Covers damage to your vehicle from accidents</p>
</div>
</div>
<!-- Comprehensive Coverage -->
<div class="flex items-start">
<div class="flex-1">
<label class="block text-sm font-medium text-gray-700 mb-1">Comprehensive Coverage</label>
<select class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus" name="vehicles[0][comprehensive]">
<option value="none">No Coverage</option>
<option value="100">$100 Deductible</option>
<option value="250">$250 Deductible</option>
<option selected="" value="500">$500 Deductible</option>
<option value="1000">$1,000 Deductible</option>
</select>
<p class="mt-1 text-xs text-gray-500">Covers non-collision damage (theft, weather, etc.)</p>
</div>
</div>
<!-- Roadside Assistance -->
<div class="flex items-start">
<div class="flex-1">
<label class="block text-sm font-medium text-gray-700 mb-1">Roadside Assistance</label>
<select class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus" name="vehicles[0][roadside]">
<option value="none">No Coverage</option>
<option selected="" value="basic">Basic Coverage</option>
<option value="premium">Premium Coverage</option>
</select>
<p class="mt-1 text-xs text-gray-500">Towing, lockout service, flat tire changes, etc.</p>
</div>
<!-- Rental Car Coverage -->
<div class="flex items-start">
<div class="flex-1">
<label class="block text-sm font-medium text-gray-700 mb-1">Rental Car Coverage</label>
<select class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus" name="vehicles[${vehicleCount}][rentalCar]">
<option value="none">No Coverage</option>
<option value="30">$30/day</option>
<option value="50">$50/day</option>
<option value="75">$75/day</option>
</select>
<p class="mt-1 text-xs text-gray-500">
          Covers rental car expenses while your vehicle is repaired
        </p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- Additional Drivers Section -->
<div class="space-y-4 pt-4">
<div class="flex justify-between items-center">
<h2 class="text-lg font-medium text-gray-900">Additional Drivers</h2>
<button class="text-sm text-blue-600 hover:text-blue-800 font-medium flex items-center" id="addDriverBtn" type="button">
<svg class="h-4 w-4 mr-1" fill="none" stroke="currentColor" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M12 6v6m0 0v6m0-6h6m-6 0H6" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
              Add Another Driver
            </button>
</div>
<p class="text-sm text-gray-500">Please list all additional drivers who will be using your vehicles.</p>
<!-- Driver Cards Container -->
<div class="space-y-4" id="driverCards">
<!-- Default empty state - no additional drivers initially -->
</div>
</div>
<!-- Liability Coverage (Applies to all vehicles) -->
<div class="space-y-4 pt-4">
<h2 class="text-lg font-medium text-gray-900">Liability Coverage*</h2>
<div class="bg-white rounded-lg border border-gray-200 p-4">
<div class="flex items-start">
<input checked="" class="form-checkbox mt-1 h-5 w-5 text-blue-600" disabled="" name="coverage_needs[]" type="checkbox" value="liability"/>
<div class="ml-3 flex-1">
<div class="flex justify-between items-start">
<div>
<span class="block font-medium text-gray-900">Liability Coverage</span>
<span class="block text-sm text-gray-500">Covers damage you cause to others (Required in most states)</span>
</div>
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                    Required
                  </span>
</div>
<div class="mt-3 grid grid-cols-1 md:grid-cols-2 gap-4">
<div>
<label class="block text-sm font-medium text-gray-700 mb-1" for="liabilityLimits">Bodily Injury &amp; Property Damage*</label>
<select class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus" id="liabilityLimits" name="liabilityLimits" required="">
<option value="">Select Coverage Limit</option>
<option value="25_50_25">$25,000/$50,000/$25,000</option>
<option value="30_60_25">$30,000/$60,000/$25,000 (Minimum in many states)</option>
<option value="50_100_50">$50,000/$100,000/$50,000</option>
<option value="100_300_100">$100,000/$300,000/$100,000 (Recommended)</option>
<option value="250_500_250">$250,000/$500,000/$250,000</option>
<option value="500_500_500">$500,000/$500,000/$500,000</option>
<option value="1000_1000_1000">$1,000,000/$1,000,000/$1,000,000</option>
</select>
<p class="mt-1 text-xs text-gray-500">
                      Format: Bodily Injury per person / Bodily Injury per accident / Property Damage
                    </p>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1" for="uninsuredLimits">Uninsured/Underinsured Motorist*</label>
<select class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus" id="uninsuredLimits" name="uninsuredLimits" required="">
<option value="">Select Coverage Limit</option>
<option value="25_50">$25,000/$50,000</option>
<option value="30_60">$30,000/$60,000</option>
<option value="50_100">$50,000/$100,000</option>
<option value="100_300">$100,000/$300,000</option>
<option value="250_500">$250,000/$500,000</option>
<option value="500_500">$500,000/$500,000</option>
<option value="same_as_liability">Same as Liability Limits</option>
</select>
<p class="mt-1 text-xs text-gray-500">
                      Protects you if hit by an uninsured/underinsured driver
                    </p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="space-y-2 pt-4">
<h2 class="text-lg font-medium text-gray-900">Driving History</h2>
<label class="block text-sm font-medium text-gray-700 mb-1">Have you or any additional drivers had Accidents/Major Violations in the last 3 years?</label>
<div class="flex space-x-4">
<label class="inline-flex items-center">
<input checked="" class="form-radio text-blue-600" name="accidents" type="radio" value="no"/>
<span class="ml-2 text-gray-700">No</span>
</label>
<label class="inline-flex items-center">
<input class="form-radio text-blue-600" name="accidents" type="radio" value="yes"/>
<span class="ml-2 text-gray-700">Yes</span>
</label>
</div>
</div>

<!-- Updated Current Insurance -->
<div>
<label class="block text-sm font-medium text-gray-700 mb-1" for="currentCarrier">Current Insurance Carrier</label>
<select class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus" id="currentCarrier" name="currentCarrier" required="">
<option value="">Select Carrier</option>
<option value="Farmers">Farmers Insurance</option>
<option value="State Farm">State Farm</option>
<option value="Allstate">Allstate</option>
<option value="Progressive">Progressive</option>
<option value="GEICO">GEICO</option>
<option value="USAA">USAA</option>
<option value="Nationwide">Nationwide</option>
<option value="Liberty Mutual">Liberty Mutual</option>
<option value="Other">Other</option>
<option value="None">No Insurance</option>
</select>
<div class="mt-4" id="otherCarrierContainer" style="display: none;">
<label class="block text-sm font-medium text-gray-700 mb-1" for="otherCarrier">Other Carrier Name</label>
<input class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus" id="otherCarrier" name="otherCarrier" type="text"/>
</div>
<div class="mt-4" id="carrierDurationContainer" style="display: none;">
<label class="block text-sm font-medium text-gray-700 mb-1" for="carrierDuration">Duration with current carrier</label>
<select class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus" id="carrierDuration" name="carrierDuration">
<option value="">Select Duration</option>
<option value="0-5">0–5 months</option>
<option value="6-11">6–11 months</option>
<option value="12-23">12–23 months</option>
<option value="24-35">24–35 months</option>
<option value="36+">36+ months</option>
</select>
</div>
</div>
<div class="pt-4">
<button class="w-full btn-primary text-white py-3.5 rounded-lg font-semibold transition-all shadow-md hover:shadow-lg" type="submit">
            Get Auto Insurance Quotes
          </button>
</div>
</form>
</div>
</main>
<!-- Footer -->
<footer class="bg-white border-t border-gray-200 py-6">
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm text-gray-500">
<p>© 2025 QuotePilot. All rights reserved.</p>
</div>
</footer>
<script>
    document.addEventListener('DOMContentLoaded', function() {
  // Driver collapse/confirm helper
  function setupDriverCard(card) {
    // 1) Summary bar
    var summary = document.createElement('div');
    summary.className = 'driver-summary';
    summary.style.display = 'none';
    summary.addEventListener('click', function() {
      card.querySelector('.driver-fields').style.display = 'block';
      summary.style.display = 'none';
    });
    card.insertBefore(summary, card.firstChild);

    // 2) Wrap fields
    var fields = document.createElement('div');
    fields.className = 'driver-fields';
    while (card.children.length > 2) {
      fields.appendChild(card.children[2]);
    }
    card.appendChild(fields);

    // 3) Confirm Driver button
    var btn = document.createElement('button');
    btn.type = 'button';
    btn.textContent = 'Confirm Driver';
    btn.className = 'confirm-driver-btn';
    btn.addEventListener('click', function() {
      var fn = card.querySelector('input[name*="[firstName]"]').value;
      var age = card.querySelector('input[name*="[lastName]"]').value;
      var idx = Array.from(document.getElementById('driverCards').children).indexOf(card) + 1;
      summary.textContent = 'Driver ' + idx + ': ' + fn + ', ' + age;
      fields.style.display = 'none';
      summary.style.display = 'flex';
    });
    card.appendChild(btn);

    // 4) Toggle button visibility
    var inputs = [
      card.querySelector('input[name*="[firstName]"]'),
      card.querySelector('input[name*="[lastName]"]')
    ];
    function toggleBtn() {
      var allFilled = inputs.every(function(i) { return i.value.trim() !== ''; });
      btn.style.display = allFilled ? 'inline-block' : 'none';
    }
    inputs.forEach(function(i) { i.addEventListener('input', toggleBtn); });
  }

      // Mobile menu toggle
      const mobileMenuButton = document.getElementById('mobileMenuButton');
      if (mobileMenuButton) {
        mobileMenuButton.addEventListener('click', function() {
          const nav = document.querySelector('nav');
          nav.classList.toggle('hidden');
          nav.classList.toggle('flex');
          nav.classList.toggle('flex-col');
          nav.classList.toggle('absolute');
          nav.classList.toggle('top-16');
          nav.classList.toggle('left-0');
          nav.classList.toggle('right-0');
          nav.classList.toggle('bg-white');
          nav.classList.toggle('p-4');
          nav.classList.toggle('shadow-md');
        });
      }

      // Transfer URL parameters
      const urlParams = new URLSearchParams(window.location.search);
      const fields = ['firstName', 'lastName', 'email', 'phone', 'dob', 'zip', 'coverageType'];
      
      fields.forEach(field => {
        if(urlParams.has(field)) {
          document.querySelector(`input[name="${field}"]`).value = urlParams.get(field);
        }
      });
      
      // Vehicle Year Dropdown for all vehicle cards
      const yearSelects = document.querySelectorAll('.vehicle-year');
      const currentYear = new Date().getFullYear();
      
      yearSelects.forEach(select => {
        for (let year = currentYear + 1; year >= 1980; year--) {
          const option = document.createElement('option');
          option.value = year;
          option.textContent = year;
          select.appendChild(option);
        }
      });

      // Comprehensive vehicle models database (not tied to years)
      const vehicleModels = {
        "acura": ["ILX", "TLX", "RLX", "MDX", "RDX", "NSX"],
        "audi": ["A3", "A4", "A5", "A6", "A7", "A8", "Q3", "Q5", "Q7", "Q8", "e-tron", "TT"],
        "bmw": ["2 Series", "3 Series", "4 Series", "5 Series", "7 Series", "8 Series", "X1", "X3", "X5", "X7", "Z4"],
        "buick": ["Encore", "Envision", "Enclave", "Regal"],
        "cadillac": ["CT4", "CT5", "Escalade", "XT4", "XT5", "XT6"],
        "chevrolet": ["Bolt EV", "Camaro", "Corvette", "Cruze", "Equinox", "Impala", "Malibu", "Silverado", "Suburban", "Tahoe", "Traverse", "Trax"],
        "chrysler": ["300", "Pacifica", "Voyager"],
        "dodge": ["Challenger", "Charger", "Durango", "Grand Caravan"],
        "ford": ["Bronco", "EcoSport", "Edge", "Escape", "Expedition", "Explorer", "F-150", "Fusion", "Mustang", "Ranger", "Transit"],
        "gmc": ["Acadia", "Canyon", "Sierra", "Terrain", "Yukon"],
        "honda": ["Accord", "Civic", "Clarity", "CR-V", "Fit", "HR-V", "Insight", "Odyssey", "Passport", "Pilot", "Ridgeline"],
        "hyundai": ["Accent", "Elantra", "Ioniq", "Kona", "Palisade", "Santa Fe", "Sonata", "Tucson", "Veloster", "Venue"],
        "infiniti": ["Q50", "Q60", "QX50", "QX60", "QX80"],
        "jeep": ["Cherokee", "Compass", "Gladiator", "Grand Cherokee", "Renegade", "Wrangler"],
        "kia": ["Forte", "K5", "Niro", "Optima", "Rio", "Sedona", "Seltos", "Sorento", "Soul", "Sportage", "Telluride"],
        "lexus": ["ES", "GS", "GX", "IS", "LC", "LS", "LX", "NX", "RC", "RX", "UX"],
        "lincoln": ["Aviator", "Corsair", "Nautilus", "Navigator"],
        "mazda": ["CX-3", "CX-30", "CX-5", "CX-9", "Mazda3", "Mazda6", "MX-5 Miata"],
        "mercedes": ["A-Class", "C-Class", "E-Class", "GLA", "GLB", "GLC", "GLE", "GLS", "S-Class"],
        "mitsubishi": ["Eclipse Cross", "Mirage", "Outlander", "Outlander Sport"],
        "nissan": ["Altima", "Armada", "Frontier", "Kicks", "Leaf", "Maxima", "Murano", "Pathfinder", "Rogue", "Sentra", "Titan", "Versa"],
        "porsche": ["718 Boxster", "718 Cayman", "911", "Cayenne", "Macan", "Panamera", "Taycan"],
        "ram": ["1500", "2500", "3500", "ProMaster"],
        "subaru": ["Ascent", "Crosstrek", "Forester", "Impreza", "Legacy", "Outback", "WRX"],
        "tesla": ["Model 3", "Model S", "Model X", "Model Y", "Cybertruck"],
        "toyota": ["4Runner", "Avalon", "C-HR", "Camry", "Corolla", "Highlander", "Land Cruiser", "Prius", "RAV4", "Sequoia", "Sienna", "Tacoma", "Tundra"],
        "volkswagen": ["Arteon", "Atlas", "Golf", "Jetta", "Passat", "Tiguan"],
        "volvo": ["S60", "S90", "V60", "V90", "XC40", "XC60", "XC90"]
      };

      // When make changes, update models for that specific vehicle
      document.querySelectorAll('.vehicle-make').forEach(makeSelect => {
        makeSelect.addEventListener('change', function() {
          const vehicleCard = this.closest('.vehicle-card');
          const modelSelect = vehicleCard.querySelector('.vehicle-model');
          const modelLoading = vehicleCard.querySelector('.model-loading');
          
          const selectedMake = this.value;
          modelSelect.innerHTML = '<option value="">Select Model</option>';
          
          if (selectedMake && vehicleModels[selectedMake]) {
            modelLoading.classList.remove('hidden');
            
            // Simulate API delay
            setTimeout(() => {
              const models = vehicleModels[selectedMake];
              models.forEach(model => {
                const option = document.createElement('option');
                option.value = model;
                option.textContent = model;
                modelSelect.appendChild(option);
              });
              modelLoading.classList.add('hidden');
            }, 300);
          }
        });
      });

      // Pre-select if values exist in URL for first vehicle
      if (urlParams.has('make')) {
        const firstMakeSelect = document.querySelector('.vehicle-make');
        firstMakeSelect.value = urlParams.get('make');
        firstMakeSelect.dispatchEvent(new Event('change'));
        
        if (urlParams.has('model')) {
          setTimeout(() => {
            const firstModelSelect = document.querySelector('.vehicle-model');
            firstModelSelect.value = urlParams.get('model');
          }, 400);
        }
      }
      
      // Make liability coverage always checked (since it's required)
      const liabilityCheckbox = document.querySelector('input[name="coverage_needs[]"][value="liability"]');
      if (liabilityCheckbox) {
        liabilityCheckbox.addEventListener('click', function(e) {
          e.preventDefault();
        });
      }
      
      // Add Vehicle Button
      document.getElementById('addVehicleBtn').addEventListener('click', function() {
        const vehicleCards = document.getElementById('vehicleCards');
        const vehicleCount = vehicleCards.querySelectorAll('.vehicle-card').length;
        
        const newVehicleCard = document.createElement('div');
        newVehicleCard.className = 'vehicle-card bg-white rounded-lg border border-gray-200 p-4 relative';
        newVehicleCard.innerHTML = `
          <div class="flex justify-between items-start mb-4">
            <h3 class="font-medium text-gray-900">Vehicle #${vehicleCount + 1}</h3>
            <button type="button" class="remove-btn text-gray-400 hover:text-red-500" onclick="removeVehicle(this)">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
              </svg>
            </button>
          </div>
          
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Year*</label>
              <select name="vehicles[${vehicleCount}][year]" required 
                     class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus vehicle-year">
                <option value="">Select Year</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Make*</label>
              <select name="vehicles[${vehicleCount}][make]" required 
                     class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus vehicle-make">
                <option value="">Select Make</option>
                <option value="acura">Acura</option>
                <option value="audi">Audi</option>
                <option value="bmw">BMW</option>
                <option value="buick">Buick</option>
                <option value="cadillac">Cadillac</option>
                <option value="chevrolet">Chevrolet</option>
                <option value="chrysler">Chrysler</option>
                <option value="dodge">Dodge</option>
                <option value="ford">Ford</option>
                <option value="gmc">GMC</option>
                <option value="honda">Honda</option>
                <option value="hyundai">Hyundai</option>
                <option value="infiniti">Infiniti</option>
                <option value="jeep">Jeep</option>
                <option value="kia">Kia</option>
                <option value="lexus">Lexus</option>
                <option value="lincoln">Lincoln</option>
                <option value="mazda">Mazda</option>
                <option value="mercedes">Mercedes-Benz</option>
                <option value="mitsubishi">Mitsubishi</option>
                <option value="nissan">Nissan</option>
                <option value="porsche">Porsche</option>
                <option value="ram">RAM</option>
                <option value="subaru">Subaru</option>
                <option value="tesla">Tesla</option>
                <option value="toyota">Toyota</option>
                <option value="volkswagen">Volkswagen</option>
                <option value="volvo">Volvo</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Model*</label>
              <select name="vehicles[${vehicleCount}][model]" required 
                     class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus vehicle-model">
                <option value="">Select Model</option>
              </select>
              <div class="model-loading hidden mt-1 text-sm text-blue-600">
                <span class="loading-spinner"></span> Loading models...
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Type*</label>
              <select name="vehicles[${vehicleCount}][vehicleType]" required 
                     class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus">
                <option value="">Select Type</option>
                <option value="car">Car</option>
                <option value="truck">Truck</option>
                <option value="suv">SUV</option>
                <option value="van">Van</option>
                <option value="motorcycle">Motorcycle</option>
              </select>
            </div>
          </div>
          
          <div class="mt-4">
            <label class="block text-sm font-medium text-gray-700 mb-1">VIN (Optional)
              <span class="text-xs text-gray-500 ml-1">Vehicle Identification Number</span>
            </label>
            <input type="text" name="vehicles[${vehicleCount}][vin]" 
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus"
                   placeholder="e.g. 1HGCM82633A123456">
          </div>
          
          <div class="mt-4">
            <label class="block text-sm font-medium text-gray-700 mb-1">Estimated Annual Mileage*</label>
                <select name="vehicles[${vehicleCount}][mileage]" required class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus vehicle-mileage">
                  <option value="0-2499">0 – 2,499 miles</option>
                  <option value="2500-4999">2,500 – 4,999 miles</option>
                  <option value="5000-7499">5,000 – 7,499 miles</option>
                  <option value="7500-9999">7,500 – 9,999 miles</option>
                  <option value="10000-11999">10,000 – 11,999 miles</option>
                  <option value="12000-13999">12,000 – 13,999 miles</option>
                  <option value="14000-15000">14,000 – 15,000 miles</option>
                </select>
                   >
          </div>
          
          <div class="mt-4">
            <label class="block text-sm font-medium text-gray-700 mb-1">Primary Use*</label>
            <select name="vehicles[${vehicleCount}][primaryUse]" required 
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus">
              <option value="">Select</option>
              <option value="commute">Commute to Work</option>
              <option value="business">Business Use</option>
              <option value="pleasure">Pleasure</option>
              <option value="ride_share">Ride Share</option>
            </select>
          </div>

          <!-- Vehicle-specific coverages -->
          <div class="mt-6 pt-4 border-t border-gray-200">
            <h4 class="text-sm font-medium text-gray-700 mb-3">Vehicle Coverage Options</h4>
            
            <div class="space-y-3">
              <!-- Collision Coverage -->
              <div class="flex items-start">
                <div class="flex-1">
                  <label class="block text-sm font-medium text-gray-700 mb-1">Collision Coverage</label>
                  <select name="vehicles[${vehicleCount}][collision]" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus">
                    <option value="none">No Coverage</option>
                    <option value="250">$250 Deductible</option>
                    <option value="500" selected>$500 Deductible</option>
                    <option value="1000">$1,000 Deductible</option>
                    <option value="1500">$1,500 Deductible</option>
                    <option value="2000">$2,000 Deductible</option>
                  </select>
                  <p class="mt-1 text-xs text-gray-500">Covers damage to your vehicle from accidents</p>
                </div>
              </div>
              
              <!-- Comprehensive Coverage -->
              <div class="flex items-start">
                <div class="flex-1">
                  <label class="block text-sm font-medium text-gray-700 mb-1">Comprehensive Coverage</label>
                  <select name="vehicles[${vehicleCount}][comprehensive]" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus">
                    <option value="none">No Coverage</option>
                    <option value="100">$100 Deductible</option>
                    <option value="250">$250 Deductible</option>
                    <option value="500" selected>$500 Deductible</option>
                    <option value="1000">$1,000 Deductible</option>
                  </select>
                  <p class="mt-1 text-xs text-gray-500">Covers non-collision damage (theft, weather, etc.)</p>
                </div>
              </div>
              
              <!-- Roadside Assistance -->
              <div class="flex items-start">
                <div class="flex-1">
                  <label class="block text-sm font-medium text-gray-700 mb-1">Roadside Assistance</label>
                  <select name="vehicles[${vehicleCount}][roadside]" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus">
                    <option value="none">No Coverage</option>
                    <option value="basic" selected>Basic Coverage</option>
                    <option value="premium">Premium Coverage</option>
                  </select>
                  <p class="mt-1 text-xs text-gray-500">Towing, lockout service, flat tire changes, etc.</p>
                </div>
              </div>
            </div>
          </div>
        `;
        
        // Add to DOM
        vehicleCards.appendChild(newVehicleCard);
        
        // Initialize year dropdown
        const newYearSelect = newVehicleCard.querySelector('.vehicle-year');
        for (let year = currentYear + 1; year >= 1980; year--) {
          const option = document.createElement('option');
          option.value = year;
          option.textContent = year;
          newYearSelect.appendChild(option);
        }
        
        // Initialize make-model relationship
        const newMakeSelect = newVehicleCard.querySelector('.vehicle-make');
        newMakeSelect.addEventListener('change', function() {
          const thisVehicleCard = this.closest('.vehicle-card');
          const thisModelSelect = thisVehicleCard.querySelector('.vehicle-model');
          const thisModelLoading = thisVehicleCard.querySelector('.model-loading');
          
          const selectedMake = this.value;
          thisModelSelect.innerHTML = '<option value="">Select Model</option>';
          
          if (selectedMake && vehicleModels[selectedMake]) {
            thisModelLoading.classList.remove('hidden');
            
            setTimeout(() => {
              const models = vehicleModels[selectedMake];
              models.forEach(model => {
                const option = document.createElement('option');
                option.value = model;
                option.textContent = model;
                thisModelSelect.appendChild(option);
              });
              thisModelLoading.classList.add('hidden');
            }, 300);
          }
        });
      });
      
      // Add Driver Button
      document.getElementById('addDriverBtn').addEventListener('click', function() {
        const driverCards = document.getElementById('driverCards');
        const driverCount = driverCards.querySelectorAll('.driver-card').length;
        
        const newDriverCard = document.createElement('div');
        newDriverCard.className = 'driver-card bg-white rounded-lg border border-gray-200 p-4 relative';
        newDriverCard.innerHTML = `
          <div class="flex justify-between items-start mb-4">
            <h3 class="font-medium text-gray-900">Driver #${driverCount + 1}</h3>
            <button type="button" class="remove-btn text-gray-400 hover:text-red-500" onclick="removeDriver(this)">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
              </svg>
            </button>
          </div>
          
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">First Name*</label>
              <input type="text" name="drivers[${driverCount}][firstName]" required 
                     class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus"
                     placeholder="First name">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Last Name*</label>
              <input type="text" name="drivers[${driverCount}][lastName]" required 
                     class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus"
                     placeholder="Last name">
            </div>
          </div>
          
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Date of Birth*</label>
              <input type="date" name="drivers[${driverCount}][dob]" required 
                     class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Relationship to You*</label>
              <select name="drivers[${driverCount}][relationship]" required 
                     class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus">
                <option value="">Select Relationship</option>
                <option value="spouse">Spouse/Partner</option>
                <option value="child">Child</option>
                <option value="parent">Parent</option>
                <option value="sibling">Sibling</option>
                <option value="roommate">Roommate</option>
                <option value="other">Other</option>
              </select>
            </div>
          </div>
          
          <div class="mt-4">
            <label class="block text-sm font-medium text-gray-700 mb-1">Driver's License Number (Optional)</label>
            <input type="text" name="drivers[${driverCount}][licenseNumber]" 
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus"
                   placeholder="Driver's license number">
          </div>
          
          <div class="mt-4">
            <label class="block text-sm font-medium text-gray-700 mb-1">License State (Optional)</label>
            <select name="drivers[${driverCount}][licenseState]" 
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 input-focus">
              <option value="">Select State</option>
              <option value="AL">Alabama</option>
              <option value="AK">Alaska</option>
              <option value="AZ">Arizona</option>
              <option value="AR">Arkansas</option>
              <option value="CA">California</option>
              <option value="CO">Colorado</option>
              <option value="CT">Connecticut</option>
              <option value="DE">Delaware</option>
              <option value="FL">Florida</option>
              <option value="GA">Georgia</option>
              <option value="HI">Hawaii</option>
              <option value="ID">Idaho</option>
              <option value="IL">Illinois</option>
              <option value="IN">Indiana</option>
              <option value="IA">Iowa</option>
              <option value="KS">Kansas</option>
              <option value="KY">Kentucky</option>
              <option value="LA">Louisiana</option>
              <option value="ME">Maine</option>
              <option value="MD">Maryland</option>
              <option value="MA">Massachusetts</option>
              <option value="MI">Michigan</option>
              <option value="MN">Minnesota</option>
              <option value="MS">Mississippi</option>
              <option value="MO">Missouri</option>
              <option value="MT">Montana</option>
              <option value="NE">Nebraska</option>
              <option value="NV">Nevada</option>
              <option value="NH">New Hampshire</option>
              <option value="NJ">New Jersey</option>
              <option value="NM">New Mexico</option>
              <option value="NY">New York</option>
              <option value="NC">North Carolina</option>
              <option value="ND">North Dakota</option>
              <option value="OH">Ohio</option>
              <option value="OK">Oklahoma</option>
              <option value="OR">Oregon</option>
              <option value="PA">Pennsylvania</option>
              <option value="RI">Rhode Island</option>
              <option value="SC">South Carolina</option>
              <option value="SD">South Dakota</option>
              <option value="TN">Tennessee</option>
              <option value="TX">Texas</option>
              <option value="UT">Utah</option>
              <option value="VT">Vermont</option>
              <option value="VA">Virginia</option>
              <option value="WA">Washington</option>
              <option value="WV">West Virginia</option>
              <option value="WI">Wisconsin</option>
              <option value="WY">Wyoming</option>
            </select>
          </div>
        `;
        
        // Add to DOM
        driverCards.appendChild(newDriverCard);
        setupDriverCard(newDriverCard);
      });

      // Form validation
      const form = document.getElementById('autoForm');
      form.addEventListener('submit', function(e) {
        const requiredFields = form.querySelectorAll('[required]');
        let isValid = true;
        
        requiredFields.forEach(field => {
          if (!field.value.trim()) {
            field.classList.add('border-red-500');
            isValid = false;
          } else {
            field.classList.remove('border-red-500');
          }
        });
        
        if (!isValid) {
          e.preventDefault();
          // Scroll to first error
          const firstError = form.querySelector('.border-red-500');
          if (firstError) {
            firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
            firstError.focus();
          }
        }
      });
    });
    
    // Remove Vehicle Function (needs to be global)
    window.removeVehicle = function(button) {
      const vehicleCard = button.closest('.vehicle-card');
      const vehicleCards = document.getElementById('vehicleCards');
      
      // Don't allow removing the first vehicle
      if (vehicleCards.querySelectorAll('.vehicle-card').length > 1) {
        vehicleCard.remove();
        
        // Renumber remaining vehicles
        const remainingCards = vehicleCards.querySelectorAll('.vehicle-card');
        remainingCards.forEach((card, index) => {
          card.querySelector('h3').textContent = `Vehicle #${index + 1}`;
          // Update all the name attributes in the form fields
          const inputs = card.querySelectorAll('input, select');
          inputs.forEach(input => {
            const name = input.name.replace(/\[\d+\]/, `[${index}]`);
            input.name = name;
          });
        });
      }
    };
    
    // Remove Driver Function (needs to be global)
    window.removeDriver = function(button) {
      const driverCard = button.closest('.driver-card');
      driverCard.remove();
      
      // Renumber remaining drivers
      const driverCards = document.getElementById('driverCards');
      const remainingCards = driverCards.querySelectorAll('.driver-card');
      remainingCards.forEach((card, index) => {
        card.querySelector('h3').textContent = `Driver #${index + 1}`;
        // Update all the name attributes in the form fields
        const inputs = card.querySelectorAll('input, select');
        inputs.forEach(input => {
          const name = input.name.replace(/\[\d+\]/, `[${index}]`);
          input.name = name;
        });
      });
    };
  </script>
<style>
.card-summary, .driver-summary {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: #eff6ff;
  padding: 0.75rem 1rem;
  border: 1px solid #cbd5e1;
  border-radius: 0.5rem;
  margin-bottom: 0.75rem;
  cursor: pointer;
  text-transform: uppercase;
}
.card-summary:hover, .driver-summary:hover {
  background-color: #e0f2fe;
}
.card-summary::after, .driver-summary::after {
  content: "🔽";
  margin-left: 0.5rem;
  transition: transform 0.2s;
}
.confirm-btn, .confirm-driver-btn {
  display: none;
  background-color: #10b981;
  color: white;
  padding: 0.75rem 1.5rem;
  border-radius: 9999px;
  cursor: pointer;
  border: none;
  font-weight: bold;
  text-transform: uppercase;
  margin-top: 0.75rem;
}

@keyframes fly {
  0% { transform: translateX(0); opacity: 0.7; }
  50% { transform: translateX(5px) translateY(-2px); opacity: 1; }
  100% { transform: translateX(10px); opacity: 0.7; }
}
.animate-fly {
  animation: fly 2s ease-in-out infinite;
}

</style>
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Vehicles
  document.querySelectorAll('.vehicle-card').forEach(function(card, index) {
    // Create summary and wrapper
    var summary = document.createElement('div');
    summary.className = 'card-summary';
    summary.style.display = 'none';
    summary.addEventListener('click', function() {
      fields.style.display = 'block';
      summary.style.display = 'none';
    });
    card.insertBefore(summary, card.firstChild);
    // Wrap fields
    var fields = document.createElement('div');
    fields.className = 'form-fields';
    while (card.children.length > 2) {
      fields.appendChild(card.children[2]);
    }
    card.appendChild(fields);
    // Create confirm button
    var btn = document.createElement('button');
    btn.type = 'button';
    btn.textContent = 'Confirm';
    btn.className = 'confirm-btn';
    btn.addEventListener('click', function() {
      var year = card.querySelector('.vehicle-year').value;
      var make = card.querySelector('.vehicle-make').value;
      var model = card.querySelector('.vehicle-model').value;
      summary.textContent = 'Vehicle ' + (index + 1) + ': ' + year + ' ' + make + ' ' + model;
      fields.style.display = 'none';
      summary.style.display = 'flex';
    });
    card.appendChild(btn);
    // Show confirm only when all inputs filled
    var inputs = [card.querySelector('.vehicle-year'), card.querySelector('.vehicle-make'), card.querySelector('.vehicle-model')];
    function toggleVehicleBtn() {
      var allFilled = inputs.every(function(input) { return input.value.trim() !== ''; });
      btn.style.display = allFilled ? 'inline-block' : 'none';
    }
    inputs.forEach(function(input) {
      input.addEventListener('input', toggleVehicleBtn);
    });
  });
  // Drivers
  document.querySelectorAll('.driver-card').forEach(function(card, index) {
    var summary = document.createElement('div');
    summary.className = 'driver-summary';
    summary.style.display = 'none';
    summary.addEventListener('click', function() {
      driverFields.style.display = 'block';
      summary.style.display = 'none';
    });
    card.insertBefore(summary, card.firstChild);
    var driverFields = document.createElement('div');
    driverFields.className = 'driver-fields';
    while (card.children.length > 2) {
      driverFields.appendChild(card.children[2]);
    }
    card.appendChild(driverFields);
    var btnD = document.createElement('button');
    btnD.type = 'button';
    btnD.textContent = 'Confirm Driver';
    btnD.className = 'confirm-driver-btn';
    btnD.addEventListener('click', function() {
      var fn = card.querySelector('input[name*="[firstName]"]').value;
      var age = card.querySelector('input[name*="[lastName]"]').value;
      summary.textContent = 'Additional Driver ' + (index + 1) + ': ' + fn + ', ' + age;
      driverFields.style.display = 'none';
      summary.style.display = 'flex';
    });
    card.appendChild(btnD);
    // Show confirm driver only when all inputs filled
    var driverInputs = [
      card.querySelector('input[name*="[firstName]"]'),
      card.querySelector('input[name*="[lastName]"]')
    ];
    function toggleDriverBtn() {
      var allFilled = driverInputs.every(function(input) { return input.value.trim() !== ''; });
      btnD.style.display = allFilled ? 'inline-block' : 'none';
    }
    driverInputs.forEach(function(input) {
      input.addEventListener('input', toggleDriverBtn);
    });
  });
});
</script>
<script>
document.addEventListener('DOMContentLoaded', function () {
  const carrierSelect = document.getElementById('currentCarrier');
  const otherInput = document.getElementById('otherCarrierContainer');
  const durationSelect = document.getElementById('carrierDurationContainer');

  carrierSelect.addEventListener('change', function () {
    const val = carrierSelect.value;
    otherInput.style.display = val === 'Other' ? 'block' : 'none';
    durationSelect.style.display = (val !== '' && val !== 'None') ? 'block' : 'none';
  });
});
</script>
</body>
</html>